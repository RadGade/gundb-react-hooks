var e=require("react"),t=function(e,t,r){try{return Promise.resolve(t&&r?r.encrypt(e,t):e)}catch(e){return Promise.reject(e)}},r=function(e,t,r){try{return Promise.resolve(t&&r?r.decrypt(e,t):e)}catch(e){return Promise.reject(e)}},n=function(e,t){void 0===t&&(t=100);var r,n=[];return function(u){return n.push(u),r||(r=setTimeout(function(){var t=n.reduce(function(e,t){return e[t.id]=t.data,e},{});e(t),n=[],r=null},t)),function(){clearTimeout(r),n=[],r=null}}},u=function(e,t){var r,n=t.data;switch(t.type){case"add":return Object.assign({},e,n);case"update":return Object.assign({},e,((r={})[n.nodeID]=n,r));case"remove":return delete e[n],Object.assign({},e);default:throw new Error}},o=function(){var t=e.useRef(!1);return e.useEffect(function(){return t.current=!0,function(){return t.current=!1}},[]),t},c=function(t,r){var n=e.useReducer(t,r),u=n[0],c=n[1],i=o();return[u,function(e){i.current&&c(e)}]},i=function(t){var r=e.useState(null),n=r[0];return n||(0,r[1])(t.user()),[n]};exports.encryptData=t,exports.decryptData=r,exports.useGun=function(t,r){return[e.useState(t({peers:r}))[0]]},exports.useGunNamespace=i,exports.useGunKeyAuth=function(t,r,n){void 0===n&&(n=!0);var u=i(t)[0],o=e.useState(!1),c=o[0],a=o[1];return t.on("auth",function(){a(!0)}),e.useEffect(function(){u&&!u.is&&r&&n&&u.auth(r)},[n,u,r]),[u,c]},exports.useGunKeys=function(t,r){var n=e.useState(r),u=n[0],o=n[1];return u||function(){try{Promise.resolve(t.pair()).then(function(e){o(e)})}catch(e){return Promise.reject(e)}}(),[u,o]},exports.useGunState=function(i,a){void 0===a&&(a={appKeys:"",sea:null,interval:100});var s=a.appKeys,f=a.sea,v=a.interval;void 0===v&&(v=100);var l=e.useState(i)[0],p=c(u,{}),d=p[0],h=p[1],m=e.useRef(null),y=o();return e.useEffect(function(){var e=[];if(y.current){var t=n(function(e){h({type:"add",data:e})},v);l.on(function(n,u,o,c){try{return Promise.resolve(r(n,s,f)).then(function(r){Object.keys(r).forEach(function(n){var u=t({id:n,data:r[n]});e.push(u)}),m.current||(m.current=c)})}catch(e){return Promise.reject(e)}})}return function(){m.current&&m.current.off(),e.length&&e.forEach(function(e){return e()})}},[]),[d,{put:function(e){try{return Promise.resolve(t(e,s,f)).then(function(e){return Promise.resolve(l.put(e)).then(function(){})})}catch(e){return Promise.reject(e)}},remove:function(e){try{return Promise.resolve(l.put(null)).then(function(){h({type:"remove",data:e})})}catch(e){return Promise.reject(e)}}},l]},exports.useGunCollectionState=function(i,a){void 0===a&&(a={appKeys:"",sea:null,interval:100});var s=a.appKeys,f=a.sea,v=a.interval;void 0===v&&(v=100);var l=e.useState(i)[0],p=c(u,{}),d=p[0],h=p[1],m=e.useRef(null),y=o();return e.useEffect(function(){var e=[];if(y.current){var t=n(function(e){h({type:"add",data:e})},v);l.map().on(function(n,u,o,c){try{return Promise.resolve(r(n,s,f)).then(function(r){if(r){var n=t({id:u,data:Object.assign({},r,{nodeID:u})});e.push(n)}m.current||(m.current=c)})}catch(e){return Promise.reject(e)}})}return function(){m.current&&m.current.off(),e.length&&e.forEach(function(e){return e()})}},[]),[d,{addToSet:function(e){try{return Promise.resolve(t(e,s,f)).then(function(e){return Promise.resolve(l.set(e)).then(function(){})})}catch(e){return Promise.reject(e)}},updateInSet:function(e,r){try{return Promise.resolve(t(r,s,f)).then(function(t){return Promise.resolve(l.get(e).put(t)).then(function(){h({type:"update",data:Object.assign({},{nodeID:e},r)})})})}catch(e){return Promise.reject(e)}},removeFromSet:function(e){try{return Promise.resolve(l.get(e).put(null)).then(function(){h({type:"remove",data:e})})}catch(e){return Promise.reject(e)}}},l]};
//# sourceMappingURL=index.js.map
