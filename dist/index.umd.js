!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.gundbReactHooks={},e.react)}(this,function(e,t){var r=function(e,t,r,n){try{return Promise.resolve(t?n.encrypt(e,r):e)}catch(e){return Promise.reject(e)}},n=function(e,t,r,n){try{return Promise.resolve(t?n.decrypt(e,r):e)}catch(e){return Promise.reject(e)}},u=function(e,t){void 0===t&&(t=100);var r,n=[];return function(u){return n.push(u),r||(r=setTimeout(function(){var t=n.reduce(function(e,t){return e[t.id]=t.data,e},{});e(t),n=[],r=null},t)),function(){clearTimeout(r),n=[],r=null}}},c=function(e,t){var r,n=t.data;switch(t.type){case"add":return Object.assign({},e,n);case"update":return Object.assign({},e,((r={})[n.nodeID]=n,r));case"remove":return delete e[n],Object.assign({},e);default:throw new Error}},o=function(){var e=t.useRef(!1);return t.useEffect(function(){return e.current=!0,function(){return e.current=!1}},[]),e},i=function(e,r){var n=t.useReducer(e,r),u=n[0],c=n[1],i=o();return[u,function(e){i.current&&c(e)}]},a=function(e){var r=t.useState(null),n=r[0];return n||(0,r[1])(e.user()),[n]};e.encryptData=r,e.decryptData=n,e.useGun=function(e,r){return[t.useState(e({peers:r}))[0]]},e.useGunNamespace=a,e.useGunKeyAuth=function(e,r,n){void 0===n&&(n=!0);var u=a(e)[0],c=t.useState(!1),o=c[0],i=c[1];return e.on("auth",function(){i(!0)}),t.useEffect(function(){u&&!u.is&&r&&n&&u.auth(r)},[n,u,r]),[u,o]},e.useGunKeys=function(e,r){var n=t.useState(r),u=n[0],c=n[1];return u||function(){try{Promise.resolve(e.pair()).then(function(e){c(e)})}catch(e){return Promise.reject(e)}}(),[u,c]},e.useGunState=function(e,a){var s=a.appKeys,f=a.sea,d=a.interval;void 0===d&&(d=100);var v=a.encrypted;void 0===v&&(v=!0);var l=t.useState(e)[0],p=i(c,{}),h=p[0],m=p[1],y=t.useRef(null),P=o();return t.useEffect(function(){var e=[];if(P.current){var t=u(function(e){m({type:"add",data:e})},d);l.on(function(r,u,c,o){try{return Promise.resolve(n(r,v,s,f)).then(function(r){Object.keys(r).forEach(function(n){var u=t({id:n,data:r[n]});e.push(u)}),y.current||(y.current=o)})}catch(e){return Promise.reject(e)}})}return function(){y.current&&y.current.off(),e.length&&e.forEach(function(e){return e()})}},[]),[h,{put:function(e){try{return Promise.resolve(r(e,v,s,f)).then(function(e){return Promise.resolve(l.put(e)).then(function(){})})}catch(e){return Promise.reject(e)}},remove:function(e){try{return Promise.resolve(l.put(null)).then(function(){m({type:"remove",data:e})})}catch(e){return Promise.reject(e)}}},l]},e.useGunCollectionState=function(e,a){var s=a.appKeys,f=a.sea,d=a.interval;void 0===d&&(d=100);var v=a.encrypted;void 0===v&&(v=!0);var l=t.useState(e)[0],p=i(c,{}),h=p[0],m=p[1],y=t.useRef(null),P=o();return t.useEffect(function(){var e=[];if(P.current){var t=u(function(e){m({type:"add",data:e})},d);l.map().on(function(r,u,c,o){try{return Promise.resolve(n(r,v,s,f)).then(function(r){if(r){var n=t({id:u,data:Object.assign({},r,{nodeID:u})});e.push(n)}y.current||(y.current=o)})}catch(e){return Promise.reject(e)}})}return function(){y.current&&y.current.off(),e.length&&e.forEach(function(e){return e()})}},[]),[h,{addToSet:function(e){try{return Promise.resolve(r(e,v,s,f)).then(function(e){return Promise.resolve(l.set(e)).then(function(){})})}catch(e){return Promise.reject(e)}},updateInSet:function(e,t){try{return Promise.resolve(r(t,v,s,f)).then(function(r){return Promise.resolve(l.get(e).put(r)).then(function(){m({type:"update",data:Object.assign({},{nodeID:e},t)})})})}catch(e){return Promise.reject(e)}},removeFromSet:function(e){try{return Promise.resolve(l.get(e).put(null)).then(function(){m({type:"remove",data:e})})}catch(e){return Promise.reject(e)}}},l]}});
//# sourceMappingURL=index.umd.js.map
